<div class="hope-filemanager-modal modal animated fadeIn" id="imagepreview">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">
                    <span aria-hidden="true">&times;</span>
                    <span class="sr-only">{{"file_manager.close" | translate}}</span>
                </button>
                <h4 class="modal-title">{{"file_manager.preview" | translate}}</h4>
            </div>
            <div class="modal-body">
                <div class="text-center">
                    <img id="imagepreview-target" class="preview" alt="{{singleSelection().model.name}}" ng-class="{'loading': apiMiddleware.apiHandler.inprocess}">
                    <span class="label label-warning" ng-show="apiMiddleware.apiHandler.inprocess">{{'file_manager.loading' | translate}} ...</span>
                </div>
                <div ng-include data-src="'error-bar'" class="clearfix"></div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal" ng-disabled="apiMiddleware.apiHandler.inprocess">{{"file_manager.close" | translate}}</button>
            </div>
        </div>
    </div>
</div>
<div class="hope-filemanager-modal modal animated fadeIn" id="remove">
    <div class="modal-dialog">
        <div class="modal-content">
            <form ng-submit="remove()">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">{{"file_manager.close" | translate}}</span>
                    </button>
                    <h4 class="modal-title">{{"file_manager.confirm" | translate}}</h4>
                </div>
                <div class="modal-body">
                    {{'file_manager.sure_to_delete' | translate}} <span ng-include data-src="'selected-files-msg'"></span>
                    <div ng-include data-src="'error-bar'" class="clearfix"></div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal" ng-disabled="apiMiddleware.apiHandler.inprocess">{{"file_manager.cancel" | translate}}</button>
                    <button type="submit" class="btn btn-primary" ng-disabled="apiMiddleware.apiHandler.inprocess" autofocus="autofocus">{{"file_manager.remove" | translate}}</button>
                </div>
            </form>
        </div>
    </div>
</div>
<div class="hope-filemanager-modal modal animated fadeIn" id="move">
    <div class="modal-dialog">
        <div class="modal-content">
            <form ng-submit="move()">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">{{"file_manager.close" | translate}}</span>
                    </button>
                    <h4 class="modal-title">{{'file_manager.move' | translate}}</h4>
                </div>
                <div class="modal-body">
                    <div ng-include data-src="'path-selector'" class="clearfix"></div>
                    <div ng-include data-src="'error-bar'" class="clearfix"></div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal" ng-disabled="apiMiddleware.apiHandler.inprocess">{{"file_manager.cancel" | translate}}</button>
                    <button type="submit" class="btn btn-primary" ng-disabled="apiMiddleware.apiHandler.inprocess">{{'file_manager.move' | translate}}</button>
                </div>
            </form>
        </div>
    </div>
</div>
<div class="hope-filemanager-modal modal animated fadeIn" id="rename">
    <div class="modal-dialog">
        <div class="modal-content">
            <form ng-submit="rename()">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">{{"file_manager.close" | translate}}</span>
                    </button>
                    <h4 class="modal-title">{{'file_manager.rename' | translate}}</h4>
                </div>
                <div class="modal-body">
                    <label class="radio">{{'file_manager.enter_new_name_for' | translate}} <b>{{singleSelection() && singleSelection().model.name}}</b></label>
                    <input class="form-control" ng-model="singleSelection().tempModel.name" autofocus="autofocus">
                    <div ng-include data-src="'error-bar'" class="clearfix"></div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal" ng-disabled="apiMiddleware.apiHandler.inprocess">{{"file_manager.cancel" | translate}}</button>
                    <button type="submit" class="btn btn-primary" ng-disabled="apiMiddleware.apiHandler.inprocess">{{'file_manager.rename' | translate}}</button>
                </div>
            </form>
        </div>
    </div>
</div>
<div class="hope-filemanager-modal modal animated fadeIn" id="copy">
    <div class="modal-dialog">
        <div class="modal-content">
            <form ng-submit="copy()">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">{{"file_manager.close" | translate}}</span>
                    </button>
                    <h4 class="modal-title">{{'file_manager.copy_file' | translate}}</h4>
                </div>
                <div class="modal-body">
                    <div ng-show="singleSelection()">
                        <label class="radio">{{'file_manager.enter_new_name_for' | translate}} <b>{{singleSelection().model.name}}</b></label>
                        <input class="form-control" ng-model="singleSelection().tempModel.name" autofocus="autofocus">
                    </div>
                    <div ng-include data-src="'path-selector'" class="clearfix"></div>
                    <div ng-include data-src="'error-bar'" class="clearfix"></div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal" ng-disabled="apiMiddleware.apiHandler.inprocess">{{"file_manager.cancel" | translate}}</button>
                    <button type="submit" class="btn btn-primary" ng-disabled="apiMiddleware.apiHandler.inprocess">{{"file_manager.copy" | translate}}</button>
                </div>
            </form>
        </div>
    </div>
</div>
<div class="hope-filemanager-modal modal animated fadeIn" id="compress">
    <div class="modal-dialog">
        <div class="modal-content">
            <form ng-submit="compress()">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">{{"file_manager.close" | translate}}</span>
                    </button>
                    <h4 class="modal-title">{{'file_manager.compress' | translate}}</h4>
                </div>
                <div class="modal-body">
                    <div ng-show="apiMiddleware.apiHandler.asyncSuccess">
                        <div class="label label-success error-msg">{{'file_manager.compression_started' | translate}}</div>
                    </div>
                    <div ng-hide="apiMiddleware.apiHandler.asyncSuccess">
                        <div ng-hide="config.allowedActions.compressChooseName">
                            {{'file_manager.sure_to_start_compression_with' | translate}} <b>{{singleSelection().model.name}}</b> ?
                        </div>
                        <div ng-show="config.allowedActions.compressChooseName">
                            <label class="radio">
                                {{'file_manager.enter_file_name_for_compression' | translate}}
                                <span ng-include data-src="'selected-files-msg'"></span>
                            </label>
                            <input class="form-control" ng-model="temp.tempModel.name" autofocus="autofocus">
                        </div>
                    </div>
                    <div ng-include data-src="'error-bar'" class="clearfix"></div>
                </div>
                <div class="modal-footer">
                    <div ng-show="apiMiddleware.apiHandler.asyncSuccess">
                        <button type="button" class="btn btn-default" data-dismiss="modal" ng-disabled="apiMiddleware.apiHandler.inprocess">{{"file_manager.close" | translate}}</button>
                    </div>
                    <div ng-hide="apiMiddleware.apiHandler.asyncSuccess">
                        <button type="button" class="btn btn-default" data-dismiss="modal" ng-disabled="apiMiddleware.apiHandler.inprocess">{{"file_manager.cancel" | translate}}</button>
                        <button type="submit" class="btn btn-primary" ng-disabled="apiMiddleware.apiHandler.inprocess">{{'file_manager.compress' | translate}}</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
<div class="hope-filemanager-modal modal animated fadeIn" id="extract" ng-init="singleSelection().emptyName()">
    <div class="modal-dialog">
        <div class="modal-content">
            <form ng-submit="extract()">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">{{"file_manager.close" | translate}}</span>
                    </button>
                    <h4 class="modal-title">{{'file_manager.extract_item' | translate}}</h4>
                </div>
                <div class="modal-body">
                    <div ng-show="apiMiddleware.apiHandler.asyncSuccess">
                        <div class="label label-success error-msg">{{'file_manager.extraction_started' | translate}}</div>
                    </div>
                    <div ng-hide="apiMiddleware.apiHandler.asyncSuccess">
                        <label class="radio">{{'file_manager.enter_folder_name_for_extraction' | translate}} <b>{{singleSelection().model.name}}</b></label>
                        <input class="form-control" ng-model="singleSelection().tempModel.name" autofocus="autofocus">
                    </div>
                    <div ng-include data-src="'error-bar'" class="clearfix"></div>
                </div>
                <div class="modal-footer">
                    <div ng-show="apiMiddleware.apiHandler.asyncSuccess">
                        <button type="button" class="btn btn-default" data-dismiss="modal" ng-disabled="apiMiddleware.apiHandler.inprocess">{{"file_manager.close" | translate}}</button>
                    </div>
                    <div ng-hide="apiMiddleware.apiHandler.asyncSuccess">
                        <button type="button" class="btn btn-default" data-dismiss="modal" ng-disabled="apiMiddleware.apiHandler.inprocess">{{"file_manager.cancel" | translate}}</button>
                        <button type="submit" class="btn btn-primary" ng-disabled="apiMiddleware.apiHandler.inprocess">{{'file_manager.extract' | translate}}</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
<div class="hope-filemanager-modal modal animated fadeIn" id="edit" ng-class="{'modal-fullscreen': fullscreen}">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <form ng-submit="edit()">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">{{"file_manager.close" | translate}}</span>
                    </button>
                    <button type="button" class="close fullscreen" ng-click="fullscreen=!fullscreen">
                        <i class="glyphicon glyphicon-fullscreen"></i>
                        <span class="sr-only">{{'file_manager.toggle_fullscreen' | translate}}</span>
                    </button>
                    <h4 class="modal-title">{{'file_manager.edit_file' | translate}}</h4>
                </div>
                <div class="modal-body">
                    <label class="radio bold">{{ singleSelection().model.fullPath() }}</label>
                    <span class="label label-warning" ng-show="apiMiddleware.apiHandler.inprocess">{{'file_manager.loading' | translate}} ...</span>
                    <textarea class="form-control code" ng-model="singleSelection().tempModel.content" ng-show="!apiMiddleware.apiHandler.inprocess" autofocus="autofocus"></textarea>
                    <div ng-include data-src="'error-bar'" class="clearfix"></div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal" ng-disabled="apiMiddleware.apiHandler.inprocess">{{'file_manager.close' | translate}}</button>
                    <button type="submit" class="btn btn-primary" ng-show="config.allowedActions.edit" ng-disabled="apiMiddleware.apiHandler.inprocess">{{'file_manager.edit' | translate}}</button>
                </div>
            </form>
        </div>
    </div>
</div>

<div class="modal animated fadeIn" id="newfolder">
  <div class="modal-dialog">
    <div class="modal-content">
        <form ng-submit="createFolder()">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal">
                  <span aria-hidden="true">&times;</span>
                  <span class="sr-only">{{"close" | translate}}</span>
              </button>
              <h4 class="modal-title">{{'new_folder' | translate}}</h4>
            </div>
            <div class="modal-body">
              <label class="radio">{{'folder_name' | translate}}</label>
              <input class="form-control" ng-model="singleSelection().tempModel.name" autofocus="autofocus">
              <div ng-include data-src="'error-bar'" class="clearfix"></div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal" ng-disabled="apiMiddleware.apiHandler.inprocess">{{"cancel" | translate}}</button>
              <button type="submit" class="btn btn-primary" ng-disabled="apiMiddleware.apiHandler.inprocess">{{'create' | translate}}</button>
            </div>
        </form>
    </div>
  </div>
</div>

<div class="hope-filemanager-modal modal animated fadeIn" id="uploadfile">
    <div class="modal-dialog">
        <div class="modal-content">
            <form ng-submit="uploadFiles()">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">{{"file_manager.close" | translate}}</span>
                    </button>
                    <h4 class="modal-title">{{"file_manager.upload_files" | translate}}</h4>
                </div>
                <div class="modal-body">
                    <label class="radio">
                        {{"file_manager.files_will_uploaded_to" | translate}}
                        <b>/{{fileNavigator.currentPath.join('/')}}</b>
                    </label>
                    <button class="btn btn-default btn-block" ngf-select="$parent.addForUpload($files)" ngf-multiple="true">
                        {{"file_manager.select_files" | translate}}
                    </button>
                    <div class="upload-list">
                        <ul class="list-group">
                            <li class="list-group-item" ng-repeat="(index, uploadFile) in $parent.uploadFileList">
                                <button class="btn btn-sm btn-danger pull-right" ng-click="$parent.removeFromUpload(index)">
                                    &times;
                                </button>
                                <h5 class="list-group-item-heading">{{uploadFile.name}}</h5>
                                <p class="list-group-item-text">{{uploadFile.size | humanReadableFileSize}}</p>
                            </li>
                        </ul>
                        <div ng-show="apiMiddleware.apiHandler.inprocess">
                            <em>{{"file_manager.uploading" | translate}}... {{apiMiddleware.apiHandler.progress}}%</em>
                            <div class="progress mb0">
                                <div class="progress-bar active" role="progressbar" aria-valuenow="{{apiMiddleware.apiHandler.progress}}" aria-valuemin="0" aria-valuemax="100" style="width: {{apiMiddleware.apiHandler.progress}}%"></div>
                            </div>
                        </div>
                    </div>
                    <div ng-include data-src="'error-bar'" class="clearfix"></div>
                </div>
                <div class="modal-footer">
                    <div>
                        <button type="button" class="btn btn-default" data-dismiss="modal">{{"file_manager.cancel" | translate}}</button>
                        <button type="submit" class="btn btn-primary" ng-disabled="!$parent.uploadFileList.length || apiMiddleware.apiHandler.inprocess">{{'file_manager.upload' | translate}}</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
<div class="hope-filemanager-modal modal animated fadeIn" id="changepermissions">
    <div class="modal-dialog">
        <div class="modal-content">
            <form ng-submit="changePermissions()">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">{{"file_manager.close" | translate}}</span>
                    </button>
                    <h4 class="modal-title">{{'file_manager.change_permissions' | translate}}</h4>
                </div>
                <div class="modal-body">
                    <table class="table mb0">
                        <thead>
                            <tr>
                                <th>{{'file_manager.permissions' | translate}}</th>
                                <th class="col-xs-1 text-center">{{'file_manager.read' | translate}}</th>
                                <th class="col-xs-1 text-center">{{'file_manager.write' | translate}}</th>
                                <th class="col-xs-1 text-center">{{'file_manager.exec' | translate}}</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="(permTypeKey, permTypeValue) in temp.tempModel.perms">
                                <td>{{file_manager.permTypeKey | translate}}</td>
                                <td ng-repeat="(permKey, permValue) in permTypeValue" class="col-xs-1 text-center" ng-click="main()">
                                    <label class="col-xs-12">
                                        <input type="checkbox" ng-model="temp.tempModel.perms[permTypeKey][permKey]">
                                    </label>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="checkbox" ng-show="config.enablePermissionsRecursive && selectionHas('dir')">
                        <label>
                            <input type="checkbox" ng-model="temp.tempModel.recursive"> {{'file_manager.recursive' | translate}}
                        </label>
                    </div>
                    <div class="clearfix mt10">
                        <span class="label label-primary pull-left" ng-hide="temp.multiple">
                    {{'file_manager.original' | translate}}: 
                    {{temp.model.perms.toCode(selectionHas('dir') ? 'd':'-')}} 
                    ({{temp.model.perms.toOctal()}})
                  </span>
                        <span class="label label-primary pull-right">
                    {{'file_manager.changes' | translate}}: 
                    {{temp.tempModel.perms.toCode(selectionHas('dir') ? 'd':'-')}} 
                    ({{temp.tempModel.perms.toOctal()}})
                  </span>
                    </div>
                    <div ng-include data-src="'error-bar'" class="clearfix"></div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">{{"file_manager.cancel" | translate}}</button>
                    <button type="submit" class="btn btn-primary" ng-disabled="">{{'file_manager.change' | translate}}</button>
                </div>
            </form>
        </div>
    </div>
</div>
<div class="hope-filemanager-modal modal animated fadeIn" id="selector" ng-controller="ModalFileManagerCtrl">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">
                    <span aria-hidden="true">&times;</span>
                    <span class="sr-only">{{"file_manager.close" | translate}}</span>
                </button>
                <h4 class="modal-title">{{"file_manager.select_destination_folder" | translate}}</h4>
            </div>
            <div class="modal-body">
                <div>
                    <div ng-include="config.tplPath + '/current-folder-breadcrumb.html'"></div>
                    <div ng-include="config.tplPath + '/main-table-modal.html'"></div>
                    <hr />
                    <button class="btn btn-sm btn-default" ng-click="selectCurrent()">
                        <i class="glyphicon"></i> {{"file_manager.select_this" | translate}}
                    </button>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal" ng-disabled="apiMiddleware.apiHandler.inprocess">{{"file_manager.close" | translate}}</button>
            </div>
        </div>
    </div>
</div>
<script type="text/ng-template" id="path-selector">
    <div class="panel panel-primary mt10 mb0">
        <div class="panel-body">
            <div class="detail-sources">
                <div class="like-code mr5"><b>{{"file_manager.selection" | translate}}:</b>
                    <span ng-include="'selected-files-msg'"></span>
                </div>
            </div>
            <div class="detail-sources">
                <div class="like-code mr5">
                    <b>{{"destination" | translate}}:</b> {{ getSelectedPath() }}
                </div>
                <a href="" class="label label-primary" ng-click="openNavigator(fileNavigator.currentPath)">
            {{'file_manager.change' | translate}}
          </a>
            </div>
        </div>
    </div>
</script>
<script type="text/ng-template" id="error-bar">
    <div class="label label-danger error-msg pull-left animated fadeIn" ng-show="apiMiddleware.apiHandler.error">
        <i class="glyphicon glyphicon-remove-circle"></i>
        <span>{{apiMiddleware.apiHandler.error}}</span>
    </div>
</script>
<script type="text/ng-template" id="selected-files-msg">
    <span ng-show="temps.length == 1">
    {{singleSelection().model.name}}
  </span>
    <span ng-show="temps.length > 1">
    {{'these_elements' | translate:totalSelecteds()}}
    <a href="" class="label label-primary" ng-click="showDetails = !showDetails">
      {{showDetails ? '-' : '+'}} {{'file_manager.details' | translate}}
    </a>
  </span>
    <div ng-show="temps.length > 1 &amp;&amp; showDetails">
        <ul class="selected-file-details">
            <li ng-repeat="tempItem in temps">
                <b>{{tempItem.model.name}}</b>
            </li>
        </ul>
    </div>
</script>
